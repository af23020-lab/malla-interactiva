<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Interactiva</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f7fb;
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        margin-bottom: 30px;
        color: #2a3b4d;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(10, 1fr);
        gap: 15px;
    }

    .ciclo {
        background: #ffffff;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .ciclo h2 {
        text-align: center;
        background: #e3ecfa;
        padding: 10px;
        border-radius: 8px;
    }

    .materia {
        background: #eaf1ff;
        margin-top: 10px;
        padding: 10px;
        border-radius: 8px;
        cursor: pointer;
        transition: 0.3s;
        position: relative;
    }

    .materia.aprobada {
        background: #c8f7c5;
        text-decoration: line-through;
    }

    .materia.bloqueada {
        background: #f5d6d6;
        cursor: not-allowed;
        opacity: 0.7;
    }

    .tooltip {
        visibility: hidden;
        background: #333;
        color: #fff;
        padding: 6px;
        border-radius: 5px;
        font-size: 12px;
        position: absolute;
        top: -5px;
        right: -5px;
        z-index: 10;
    }

    .materia:hover .tooltip {
        visibility: visible;
    }
</style>
</head>

<body>

<h1>Malla Curricular Interactiva - Anestesiología</h1>

<div class="grid" id="grid"></div>

<script>
const materias = {
    // CICLO 1
    "BEM131": { nombre: "Bioética Médica", uv: 6, ciclo: 1, req: [] },
    "BIG131": { nombre: "Biología General", uv: 6, ciclo: 1, req: [] },
    "HIA131": { nombre: "Historia de la Anestesia", uv: 4, ciclo: 1, req: [] },
    "PSG131": { nombre: "Psicología I", uv: 6, ciclo: 1, req: [] },

    // CICLO 2
    "ANH131": { nombre: "Anatomía Humana", uv: 6, ciclo: 2, req: ["BIG131"] },
    "GEA131": { nombre: "Generalidades en Anestesiología", uv: 6, ciclo: 2, req: ["HIA131"] },
    "PSG231": { nombre: "Psicología II", uv: 4, ciclo: 2, req: ["PSG131"] },
    "QUG131": { nombre: "Química General", uv: 4, ciclo: 2, req: ["BIG131"] },

    // CICLO 3
    "IGT131": { nombre: "Inglés Técnico", uv: 4, ciclo: 3, req: ["BEM131"] },
    "PBF131": { nombre: "Principios Básicos de Farmacología", uv: 6, ciclo: 3, req: ["GEA131"] },
    "VPP131": { nombre: "Valoración y Preparación Pre Anestésica", uv: 7, ciclo: 3, req: ["HIA131"] },
    "VAE131": { nombre: "Vía Aérea", uv: 4, ciclo: 3, req: ["ANH131"] },

    // CICLO 4
    "AGR131": { nombre: "Anestesia General y Regional", uv: 5, ciclo: 4, req: ["VPP131"] },
    "FAA131": { nombre: "Farmacología Aplicada a la Anestesia I", uv: 6, ciclo: 4, req: ["PBF131"] },
    "MEA131": { nombre: "Monitorización en Anestesia", uv: 6, ciclo: 4, req: ["GEA131"] },
    "QOG131": { nombre: "Química Orgánica General", uv: 4, ciclo: 4, req: ["QUG131"] },

    // CICLO 5
    "FAA231": { nombre: "Farmacología Aplicada a la Anestesia II", uv: 4, ciclo: 5, req: ["FAA131"] },
    "FIH131": { nombre: "Fisiología Humana", uv: 6, ciclo: 5, req: ["FAA131"] },
    "PRA131": { nombre: "Práctica I", uv: 6, ciclo: 5, req: ["AGR131"] },
    "TEA131": { nombre: "Técnicas Anestésicas", uv: 4, ciclo: 5, req: ["AGR131"] },

    // CICLO 6
    "BIE131": { nombre: "Bioestadística", uv: 4, ciclo: 6, req: ["QUG131"] },
    "FPR131": { nombre: "Fisiología Pulmonar y Terapia Respiratoria", uv: 4, ciclo: 6, req: ["FIH131"] },
    "PRA231": { nombre: "Práctica II", uv: 6, ciclo: 6, req: ["PRA131"] },
    "TAE131": { nombre: "Técnicas Anestésicas Especializadas I", uv: 6, ciclo: 6, req: ["TEA131"] },

    // CICLO 7
    "EPI131": { nombre: "Epidemiología", uv: 4, ciclo: 7, req: ["QOG131"] },
    "MEI131": { nombre: "Metodología de la Investigación I", uv: 6, ciclo: 7, req: ["BEM131"] },
    "PRA331": { nombre: "Práctica III", uv: 6, ciclo: 7, req: ["PRA231"] },
    "TAE231": { nombre: "Técnicas Anestésicas Especializadas II", uv: 6, ciclo: 7, req: ["TAE131"] },

    // CICLO 8
    "ASD131": { nombre: "Anestesia en Situaciones de Desastres", uv: 4, ciclo: 8, req: ["TAE231"] },
    "MEI231": { nombre: "Metodología de la Investigación II", uv: 6, ciclo: 8, req: ["MEI131"] },
    "PRA431": { nombre: "Práctica IV", uv: 6, ciclo: 8, req: ["PRA331"] },

    // CICLO 9
    "APU131": { nombre: "Anestesia en UCI", uv: 4, ciclo: 9, req: ["MEA131"] },
    "AEC131": { nombre: "Anestesia y Enfermedades Coexistentes I", uv: 4, ciclo: 9, req: ["TAE231"] },
    "NSA131": { nombre: "Normativas de Salud Aplicadas", uv: 4, ciclo: 9, req: ["GEA131"] },

    // CICLO 10
    "AEC231": { nombre: "Enfermedades Coexistentes II", uv: 4, ciclo: 10, req: ["AEC131"] },
    "DOS131": { nombre: "Desarrollo y Defensa de Seminario", uv: 4, ciclo: 10, req: ["MEI231"] },
    "REA131": { nombre: "Redacción de Textos Académicos", uv: 4, ciclo: 10, req: ["MEI131", "MEI231"] }
};

let aprobadas = JSON.parse(localStorage.getItem("aprobadas")) || [];

function render() {
    const grid = document.getElementById("grid");
    grid.innerHTML = "";

    for (let c = 1; c <= 10; c++) {
        const col = document.createElement("div");
        col.className = "ciclo";
        col.innerHTML = `<h2>Ciclo ${c}</h2>`;

        Object.entries(materias).forEach(([codigo, data]) => {
            if (data.ciclo === c) {
                const mat = document.createElement("div");
                mat.className = "materia";

                let reqNoCumplidos = data.req.filter(r => !aprobadas.includes(r));

                if (reqNoCumplidos.length > 0) {
                    mat.classList.add("bloqueada");
                    mat.innerHTML = `
                        <strong>${codigo}</strong> - ${data.uv} UV<br>${data.nombre}
                        <span class="tooltip">Requiere: ${reqNoCumplidos.join(", ")}</span>
                    `;
                } else {
                    if (aprobadas.includes(codigo)) mat.classList.add("aprobada");

                    mat.innerHTML = `<strong>${codigo}</strong> - ${data.uv} UV<br>${data.nombre}`;

                    mat.addEventListener("click", () => {
                        if (aprobadas.includes(codigo)) {
                            aprobadas = aprobadas.filter(x => x !== codigo);
                        } else {
                            aprobadas.push(codigo);
                        }
                        localStorage.setItem("aprobadas", JSON.stringify(aprobadas));
                        render();
                    });
                }

                col.appendChild(mat);
            }
        });

        grid.appendChild(col);
    }
}

render();
</script>

</body>
</html>

